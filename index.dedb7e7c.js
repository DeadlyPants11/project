!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},n={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in r)return r[e].exports;if(e in n){var t=n[e];delete n[e];var a={id:e,exports:{}};return r[e]=a,t.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){n[e]=t},t.parcelRequired7c6=a),a("fI0b8"),a("5LxsL");var o=a("l5bVx"),i=a("4QXHb"),c=a("bpxeT"),s=a("8MBJY"),l=a("a2hTj"),u=a("2TvXO"),f=a("dIxxU"),d=function(){"use strict";function t(){e(s)(this,t),this.authKey="8378c884a6341b6bb6a7cfb362550079",this.baseUrl="https://api.themoviedb.org/3",this.currentPage=1,this.searchQuery="",this.lastQuery="",this.searchParams=""}return e(l)(t,[{key:"fetchFilms",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this;return e(c)(e(u).mark((function a(){var o,i;return e(u).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="",t?(n.searchParams=new URLSearchParams({api_key:n.authKey,page:r,query:t}),o="".concat(n.baseUrl,"/search/movie?").concat(n.searchParams)):(n.searchParams=new URLSearchParams({api_key:n.authKey,page:r}),o="".concat(n.baseUrl,"/trending/movie/week?").concat(n.searchParams)),e.prev=2,e.next=5,f.default.get(o);case 5:return i=e.sent,e.abrupt("return",i.data);case 9:e.prev=9,e.t0=e.catch(2);case 11:case"end":return e.stop()}}),a,null,[[2,9]])})))()}}]),t}();function h(e,t){try{var r=localStorage.getItem("CURRENT_FILMS"),n=JSON.parse(r);return n.page===t&&n.query===e&&n}catch(e){console.error("Get state error: ",e.message)}}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=new d,n=h(e,t);return n?Promise.resolve(n.results):r.fetchFilms(e,t).then((function(r){try{var n=JSON.stringify({page:t,query:e,results:r});localStorage.setItem("CURRENT_FILMS",n)}catch(e){console.error("Set state error: ",e.message)}return r}))}var g=document.querySelector(".pagination"),p=document.querySelector(".film__container"),v=document.querySelector(".form__input");g.addEventListener("click",(function(e){var t=v.value.trim();if("..."===e.target.textContent)return;if("li"!==e.target.nodeName.toLowerCase())return;if(p.innerHTML="","ðŸ¡¸"===e.target.textContent){var r=y-=1;return void m(t,r).then((function(e){(0,i.createMarkup)(e.results),b(e.page,e.total_pages)}))}if("ðŸ¡º"===e.target.textContent)return void m(t,y+=1).then((function(e){(0,i.createMarkup)(e.results),b(e.page,e.total_pages)}));var n=Number(e.target.textContent);m(t,n).then((function(e){(0,i.createMarkup)(e.results),b(e.page,e.total_pages)}))})),m().then((function(e){(0,i.createMarkup)(e.results),b(e.page,e.total_pages)}));var y=0;function b(t,r){if("number"===(void 0===t?"undefined":e(o)(t)))if("number"===(void 0===r?"undefined":e(o)(r))){var n="",a=t-1,i=t+1,c=t+2;y=t,t>1&&(n+='<li class="arrow-right">&#129144;</li>',n+="<li>1</li>"),t>4&&(n+='<li class="dots">...</li>'),t>3&&(n+="<li>".concat(t-2,"</li>")),t>2&&(n+="<li>".concat(a,"</li>")),n+='<li class="pagination-current">'.concat(t,"</li>"),r-1>t&&(n+="<li>".concat(i,"</li>")),r-2>t&&(n+="<li>".concat(c,"</li>")),r-3>t&&(n+='<li class="dots">...</li> '),r>t&&(n+="<li>".concat(r,"</li>"),n+='<li class="arrow-right">&#129146;</li>'),g.innerHTML=n}else console.error("allPages: Not a number");else console.error("currentPage:Not a number")}i=a("4QXHb");var _={filmContainer:document.querySelector(".film__container"),searchForm:document.querySelector(".search__form"),notification:document.querySelector(".container__notification")},x=new d;_.searchForm.addEventListener("submit",(function(e){e.preventDefault();var t=e.currentTarget,r=t.elements.name.value.trim();if(x.query=r,r)m(r,1).then((function(e){if(0===e.results.length){t.elements.name.value=x.lastQuery,_.notification.textContent="Search result not successful. Enter the correct movie name";setTimeout((function(){return _.notification.textContent=""}),3e3);throw new Error}x.lastQuery=r,_.filmContainer.innerHTML="",_.filmContainer.insertAdjacentHTML("beforeend",(0,i.createMarkup)(e.results)),b(e.page,e.total_pages)})).catch((function(e){x.query=x.lastQuery}));else{x.query=x.lastQuery,t.elements.name.value=x.lastQuery,_.notification.textContent="Search result not successful. Enter the correct movie name";setTimeout((function(){return _.notification.textContent=""}),3e3)}})),a("6zOJ5"),a("b7ONl"),a("bzPT2"),a("ghI91"),console.log("index.js loaded")}();
//# sourceMappingURL=index.dedb7e7c.js.map

var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in r){var n=r[e];delete r[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){r[e]=t},e.parcelRequired7c6=n),n("j1Kz9"),n("89eeZ");var a=n("1SkT2"),o=n("2shzp");class s{async fetchFilms(e="",t=1){let r="";e?(this.searchParams=new URLSearchParams({api_key:this.authKey,page:t,query:e}),r=`${this.baseUrl}/search/movie?${this.searchParams}`):(this.searchParams=new URLSearchParams({api_key:this.authKey,page:t}),r=`${this.baseUrl}/trending/movie/week?${this.searchParams}`);try{return(await o.default.get(r)).data}catch(e){}}constructor(){this.authKey="8378c884a6341b6bb6a7cfb362550079",this.baseUrl="https://api.themoviedb.org/3",this.currentPage=1,this.searchQuery="",this.lastQuery="",this.searchParams=""}}function i(e,t){try{const r=localStorage.getItem("CURRENT_FILMS"),n=JSON.parse(r);return n.page===t&&n.query===e&&n}catch(e){console.error("Get state error: ",e.message)}}function l(e="",t=1){const r=new s,n=i(e,t);return n?Promise.resolve(n.results):r.fetchFilms(e,t).then((r=>{try{const n=JSON.stringify({page:t,query:e,results:r});localStorage.setItem("CURRENT_FILMS",n)}catch(e){console.error("Set state error: ",e.message)}return r}))}const c=document.querySelector(".pagination"),u=document.querySelector(".film__container"),d=document.querySelector(".form__input");c.addEventListener("click",(function(e){const t=d.value.trim();if("..."===e.target.textContent)return;if("li"!==e.target.nodeName.toLowerCase())return;if(u.innerHTML="","ðŸ¡¸"===e.target.textContent){const e=m-=1;return void l(t,e).then((e=>{(0,a.createMarkup)(e.results),h(e.page,e.total_pages)}))}if("ðŸ¡º"===e.target.textContent)return void l(t,m+=1).then((e=>{(0,a.createMarkup)(e.results),h(e.page,e.total_pages)}));const r=Number(e.target.textContent);l(t,r).then((e=>{(0,a.createMarkup)(e.results),h(e.page,e.total_pages)}))})),l().then((e=>{(0,a.createMarkup)(e.results),h(e.page,e.total_pages)}));let m=0;function h(e,t){if("number"!==typeof e)return void console.error("currentPage:Not a number");if("number"!==typeof t)return void console.error("allPages: Not a number");let r="";m=e,e>1&&(r+='<li class="arrow-right">&#129144;</li>',r+="<li>1</li>"),e>4&&(r+='<li class="dots">...</li>'),e>3&&(r+=`<li>${e-2}</li>`),e>2&&(r+=`<li>${e-1}</li>`),r+=`<li class="pagination-current">${e}</li>`,t-1>e&&(r+=`<li>${e+1}</li>`),t-2>e&&(r+=`<li>${e+2}</li>`),t-3>e&&(r+='<li class="dots">...</li> '),t>e&&(r+=`<li>${t}</li>`,r+='<li class="arrow-right">&#129146;</li>'),c.innerHTML=r}a=n("1SkT2");const f={filmContainer:document.querySelector(".film__container"),searchForm:document.querySelector(".search__form"),notification:document.querySelector(".container__notification")},g=new s;f.searchForm.addEventListener("submit",(function(e){e.preventDefault();const t=e.currentTarget,r=t.elements.name.value.trim();if(g.query=r,r)l(r,1).then((e=>{if(0===e.results.length){t.elements.name.value=g.lastQuery,f.notification.textContent="Search result not successful. Enter the correct movie name";setTimeout((()=>f.notification.textContent=""),3e3);throw new Error}g.lastQuery=r,f.filmContainer.innerHTML="",f.filmContainer.insertAdjacentHTML("beforeend",(0,a.createMarkup)(e.results)),h(e.page,e.total_pages)})).catch((e=>{g.query=g.lastQuery}));else{g.query=g.lastQuery,t.elements.name.value=g.lastQuery,f.notification.textContent="Search result not successful. Enter the correct movie name";setTimeout((()=>f.notification.textContent=""),3e3)}}));a=n("1SkT2");n("91MAV"),n("7rYDH"),(()=>{const e={openModalBtn:document.querySelector("[data-modal-open]"),closeModalBtn:document.querySelector("[data-modal-close]"),modal:document.querySelector("[data-modal]")};function t(){e.modal.classList.toggle("is-hidden")}e.openModalBtn.addEventListener("click",t),e.closeModalBtn.addEventListener("click",t)})(),n("h53OD"),l().then((e=>{(0,a.createMarkup)(e.results)})),console.log(toggleModal);
//# sourceMappingURL=index.41080c6f.js.map
